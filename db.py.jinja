import dbmeta
# Do not edit this file, it's autogenerated

{% for ent in package.entities %}
class {{ent.name}}:
    def __init__(self):
        dbmeta.DbMeta.init(self)

    @classmethod
    def get(cls, db, id):
        return dbmeta.DbMeta.get(db, cls, id)
{% endfor %}

def init(db):
    db.deploypacket('{{package.structure.name}}', {{package.structure.version}}, [
    {%- for ent in package.entities %}
    "CREATE TABLE {{ent.name}} ({%- for member in ent.members %}{{member.name}} {{member.datatype.name}} NOT NULL{{", " if not loop.last}}{%- endfor %})"{{"," if not loop.last}}
    {%- endfor %}])
    {%- for ent in package.entities %}
    dbmeta.DbMeta.set({{ent.name}}, '{{ent.name}}', [{%- for member in ent.members %}'{{member.name}}'{{", " if not loop.last}}{%- endfor %}])
    {%- endfor %}


